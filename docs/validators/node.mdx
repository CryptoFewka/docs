---
sidebar_position: 2
sidebar_label: Running a Full Node
hide_title: false
id: running-a-full-node
title: Running a Full Node
---

import AppInfo from "@site/src/components/AppInfo/AppInfo";
import UpgradeProposals from "@site/src/components/UpgradeProposals/UpgradeProposals";

# Running a Full Node

This document outlines the process for running a full ZetaChain node. It is
intended for those who are familiar with the Linux operating system and the
command line interface.

Please refer to [Technical Requirements](/validators/requirements) for more
details on the technical requirements for running a ZetaChain node.

## Getting Started

Validators and full nodes are running the following version of `zetacored`:

<AppInfo />

<UpgradeProposals />

### Set Limits on Open Files and Number of Processes

To better manage the resources of your nodes, we recommend setting some limits
on the maximum number of open file descriptors (nofile) and maximum number of
processes (nproc).

Edit `/etc/security/limits.conf` to include or modify the following parameters:

```text title="/etc/security/limits.conf"
*       soft    nproc   262144
*       hard    nproc   262144
*       soft    nofile  262144
*       hard    nofile  262144
```

Edit `/etc/sysctl.conf` to include the following:

```text title="/etc/sysctl.conf"
fs.file-max=262144
```

### Create `zetachain` User Account

We recommend running ZetaChain binary files with a user account rather than as
root.

```bash
useradd -m -s /bin/bash zetachain
```

### Create ZetaChain Directory Structure

This is needed to store ZetaChain binary and configuration files.

```bash
sudo su zetachain
mkdir -p /home/zetachain/.zetacored/bin
mkdir /home/zetachain/.zetacored/config
```

### Download and Install the `zetacored` binary

Binaries are built based on OS version and CPU architecture. You can download
the latest binaries from our
[ZetaChain Node GitHub Repo](https://github.com/zeta-chain/node/releases)

Install it in your `PATH`:

```
/usr/local/bin/zetacored
```

## General Settings

### Install ZetaChain Configuration Files

ZetaChain configuration files can be downloaded from the
[Athens 3 GitHub Repo](https://github.com/zeta-chain/network-athens3/tree/main/network_files/config)

Install it as follows:

```
/home/zetachain/.zetacored/config/app.toml
/home/zetachain/.zetacored/config/client.toml
/home/zetachain/.zetacored/config/config.toml
/home/zetachain/.zetacored/config/genesis.json
```

### Create a Systemd Unit File

We recommend using Systemd to start and stop ZetaChain binary files and view the
logs. You can create a Systemd unit file:

```bash title="/etc/systemd/system/zetacored.service"
[Unit]
Description=Zetacored Service
After=multi-user.target
StartLimitIntervalSec=0
[Install]
WantedBy=multi-user.target
[Service]
Type=simple
Restart=always
RestartSec=90
User=zetachain
LimitNOFILE=262144
ExecStart=zetacored start --home /home/zetachain/.zetacored/ --log_format json  --log_level info --moniker <YOUR_NODE_NAME_HERE>
```

Then start the service with `systemctl start zetacored`.

You can view the logs with `journalctl -o cat -f -u zetacored`.

## CLI

ZetaChain Core is built with the Cosmos SDK. There is an `--help` flag that can
be used with any subcommand to learn its use and syntax.

```bash
zetacored --help
```

## Monitoring

In a production environment we recommend monitoring the node resources (CPU
load, Memory Usage, Disk usage and Disk IO) for any performance degradation.

ZetaChain Core generates a log that can be monitored for errors and used for
troubleshooting. If you install Zetacore as a Systemd service using the
instructions above you can view this log with
`journalctl -o cat -f -u zetacored`.

Prometheus can be enabled to serve metrics which can be consumed by Prometheus
collector(s). Telemetry include Prometheus metrics can be enabled in the
app.toml file. See the
[Cosmos SDK Telemetry Documentation](https://docs.cosmos.network/v0.46/core/telemetry.html)
for more information.

## Syncing from a StateSync node

### Testnet

| Region                      | IP          |
| :-------------------------- | :---------- |
| N. Virginia (US East)       | 52.3.196.71 |
| Singapore (APAC South East) | 3.0.80.230  |

### Mainnet

| Region                      | IP  |
| :-------------------------- | :-- |
| N. Virginia (US East)       | TBD |
| Oregon (US West)            | TBD |
| Ireland (EU West)           | TBD |
| Singapore (APAC South East) | TBD |

Use the state sync node closer your node. For example, if the closest node is
`52.3.196.71`, run the following command to collect the latest block height and
hash:

```
curl -s http://52.3.196.71:26657/block | jq -r '"trust_height = " + .result.block.header.height + "\ntrust_hash = \"" + .result.block_id.hash + "\""'
```

Use the return values to edit the following variables in `config.toml`:

```text title="/home/zetachain/.zetacored/config/config.toml"
[statesync]
enable = true

rpc_servers = "<closest StateSync IP>:26657,<closest StateSync IP>:26657"
trust_height = <return value for the latest block height>
trust_hash = "<return value for the latest block hash>"
```

Start the ZetaChain node:

```bash
zetacored start
```
